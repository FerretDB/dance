---
runner: gotest
args:
  - -timeout=2m
  - -shuffle=on
  - ./examples/...
  - ./mongo
  - ./mongo/gridfs
  # - ./mongo/integration
  # - ./mongo/integration/unified
  # - ./x/mongo/driver/integration
  # - ./x/mongo/driver/topology

results:
  ferretdb:
    stats:
      unexpected_fail: 0
      unexpected_skip:
      unexpected_pass: 0
      expected_fail: 0
      expected_skip: 4
      expected_pass: 199

    skip:
      ## shared with mongodb

      # needs replica set
      - go.mongodb.org/mongo-driver/examples/documentation_examples/TestChangeStreamExamples
      - go.mongodb.org/mongo-driver/examples/documentation_examples/TestTransactionExamples
      - go.mongodb.org/mongo-driver/mongo/TestConvenientTransactions

      # OCSP
      - go.mongodb.org/mongo-driver/mongo/TestOCSP

  mongodb:
    stats:
      unexpected_fail: 0
      unexpected_skip:
      unexpected_pass: 0
      expected_fail: 0
      expected_skip: 4
      expected_pass: 199

    skip:
      # needs replica set
      - go.mongodb.org/mongo-driver/examples/documentation_examples/TestChangeStreamExamples
      - go.mongodb.org/mongo-driver/examples/documentation_examples/TestTransactionExamples
      - go.mongodb.org/mongo-driver/mongo/TestConvenientTransactions

      # OCSP
      - go.mongodb.org/mongo-driver/mongo/TestOCSP
