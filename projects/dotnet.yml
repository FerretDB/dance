---
runner: command
params:
  dir: dotnet-example
  setup: dotnet build

  tests:
    - name: normal
      cmd: dotnet run '{{.MONGODB_URI}}'
    - name: strict
      cmd: dotnet run '{{.MONGODB_URI}}' --strict
    - name: noauth
      cmd: dotnet run '{{.MONGODB_URI_ANONYMOUS}}'

results:
  mongodb:
    stats:
      pass: 3

  mongodb-secured:
    stats:
      fail: 1
      pass: 2
    fail:
      - noauth

  ferretdb-postgresql:
    stats:
      fail: 1
      pass: 2
    fail:
      # https://github.com/FerretDB/FerretDB/issues/3121
      # https://github.com/FerretDB/dance/issues/889
      - strict

  ferretdb-sqlite:
    stats:
      fail: 1
      pass: 2
    fail:
      # https://github.com/FerretDB/FerretDB/issues/3121
      # https://github.com/FerretDB/dance/issues/889
      - strict
