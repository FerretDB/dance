---
runner: command
params:
  dir: mongo-core-test
  setup: |
    python3 -m venv .
    ./bin/pip3 install pymongo

  tests:
    - name: noauth
      cmd: >
        MONGO_HOST='{{.MONGODB_DOCKER_HOST}}'
        MONGO_PORT='{{.MONGODB_PORT}}'
        MONGO_USERNAME=''
        MONGO_PASSWORD=''
        TEST_DIRECTORY='../mongo/jstests'
        EXEC_DIRECTORY='/projects/mongo/jstests'
        MONGO_COMMAND='docker compose run --rm legacy-mongo-shell'
        ./bin/python3 run.py 8

results:
  mongodb:
    stats:
      pass: 1

  ferretdb2:
    stats:
      pass: 1
