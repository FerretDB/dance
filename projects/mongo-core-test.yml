---
runner: command
params:
  dir: mongo-core-test
  setup: |
    python3 -m venv .
    COMPOSE_FILE='mongo5.yml' TEST_DIRECTORY=$(readlink -f ../mongo/jstests) docker compose up -d

  tests:
    - name: noauth
      cmd: >
        COMPOSE_FILE='mongo5.yml'
        TEST_DIRECTORY=$(readlink -f ../mongo/jstests)
        MONGO_PORT='{{.MONGODB_PORT}}'
        MONGO_USERNAME=''
        MONGO_PASSWORD=''
        ./bin/python3 run.py 8

results:
  mongodb:
    stats:
      pass: 1

  ferretdb2:
    stats:
      pass: 1
