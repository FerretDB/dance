---
runner: gotest
params:
  dir: mongo-tools
  args:
    - -timeout=20m
    - -shuffle=on
    - -setup-uri={{.MONGODB_URI}}
    - -uri={{.MONGODB_URI_DOCKER_HOST}}

results:
  mongodb:
    stats:
      pass: 6

  mongodb-secured:
    stats:
      pass: 6

  ferretdb-postgresql:
    stats:
      pass: 3
      skip: 1 # TODO https://github.com/FerretDB/dance/issues/892
    skip:
      - github.com/FerretDB/dance/projects/mongo-tools/TestDumpRestore

  ferretdb-sqlite-replset:
    stats:
      pass: 3
      skip: 1 # TODO https://github.com/FerretDB/dance/issues/892
    skip:
      - github.com/FerretDB/dance/projects/mongo-tools/TestDumpRestore

  ferretdb-postgresql-secured:
    stats:
      pass: 3
      skip: 1 # TODO https://github.com/FerretDB/dance/issues/892
    skip:
      - github.com/FerretDB/dance/projects/mongo-tools/TestDumpRestore

  ferretdb-sqlite-replset-secured:
    stats:
      pass: 3
      skip: 1 # TODO https://github.com/FerretDB/dance/issues/892
    skip:
      - github.com/FerretDB/dance/projects/mongo-tools/TestDumpRestore
