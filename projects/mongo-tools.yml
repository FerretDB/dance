---
runner: gotest
params:
  dir: mongo-tools
  args:
    - -timeout=20m
    - -shuffle=on
    - -setup-uri={{.MONGODB_URI}}
    - -uri={{.MONGODB_URI_DOCKER_HOST}}

results:
  mongodb:
    stats:
      pass: 6

  mongodb-secured:
    stats:
      pass: 6

  ferretdb-postgresql:
    stats:
      pass: 4
      fail: 2
    pass:
      - github.com/FerretDB/dance/projects/mongo-tools/TestDumpRestore/sample_analytics
    fail:
      # TODO https://github.com/FerretDB/dance/issues/892
      - github.com/FerretDB/dance/projects/mongo-tools/TestDumpRestore
      - github.com/FerretDB/dance/projects/mongo-tools/TestDumpRestore/sample_geospatial

  ferretdb-postgresql-secured:
    stats:
      pass: 4
      fail: 2
    pass:
      - github.com/FerretDB/dance/projects/mongo-tools/TestDumpRestore/sample_analytics
    fail:
      # TODO https://github.com/FerretDB/dance/issues/892
      - github.com/FerretDB/dance/projects/mongo-tools/TestDumpRestore
      - github.com/FerretDB/dance/projects/mongo-tools/TestDumpRestore/sample_geospatial

  ferretdb:
    stats:
      pass: 6

  ferretdb-secured:
    stats:
      pass: 6

  ferretdb-dev:
    stats:
      pass: 6

  ferretdb-dev-secured:
    stats:
      pass: 6
